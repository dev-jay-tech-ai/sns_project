<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"></script>
    <style>
        a {
            text-decoration: none;
            color: black;
        }
        input {
            box-shadow: none;
        }
        body {
            background-color: #f8f9fa;
        }
        .container {
            padding-top: 100px;
        }
        .container > div {
            height: 100vh;
        }
        .feed {
            width: 50%;
            background-color: orange;
            margin-right: 256px;
        }
        
        .profile {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .list {
            width: 25%;
            left: 62%;
        }
        
        .modal_overlay {
            width: 100%;
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(1.5px);
            -webkit-backdrop-filter: blur(1.5px);
        }
    
        .modal_window {
            background: white;
            backdrop-filter: blur(13.5px);
            -webkit-backdrop-filter: blur(13.5px);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            width: 800px;
            height: 600px;
            position: relative;
            padding: 10px;
        }
        
    </style>
    <title>Title</title>
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-white position-fixed w-100">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">SNS APP</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          </ul>
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
        </div>
        <div>
            <span class="material-symbols-outlined">home</span>
            <span class="material-symbols-outlined">send</span>
            <span id="nav_bar_add_box" class="material-symbols-outlined">add_box</span>
            <span class="material-symbols-outlined">explore</span>
            <span class="material-symbols-outlined">favorite</span>
        </div>

      </div>
    </nav>
    <div class="container d-flex justify-content-center text-center">
        <div class="border border-light-subtle bg-white feed">

            {% for feed in feeds %}
            <div class="feed_box">
                <div class="d-flex align-items-center m-3">
                    <img class="profile" src="{{ feed.profile_image }}" alt="profile" />
                    <div> {{ feed.user_id }}</div>
                </div>
                <div>
                    <img class="w-100" src="{{ feed.image }}" alt="image" />
                </div>
                <div class="text-start m-3">
                    <div class="d-flex mt-2 justify-content-between">
                        <div>
                            <span class="material-symbols-outlined">favorite</span>
                            <span class="material-symbols-outlined">chat_bubble</span>
                            <span class="material-symbols-outlined">send</span>
                        </div>
                        <div>
                            <span class="material-symbols-outlined">bookmark</span>
                        </div>
                    </div>
                    <div>liked by <b>janja</b> and <b>{{ feed.like_count }} others</b></div>
                    <div><b>{{ feed.user_id }}</b> {{ feed.content }}</div>
                    <div><b>aaa </b> I wish I come there</div>                
                    <div><b>bbb </b>input comments</div>
                    <div class="">
                        <label for="exampleFormControlInput1" class="form-comment"></label>
                        <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="Add a comment">
                    </div>

                </div>
            </div>
            {% endfor %}

        </div>

        <!-- right -->
        <div class="list position-fixed text-start ms-5">
            <div class="d-flex align-items-center">
                <img class="profile" src="https://yt3.googleusercontent.com/V9sqo4C6K-sbjDogTQdWLiyviw2MyGWPiHLjoF3Us71MKb677V3SQ8KqhorzqHMplgedG6iy=s900-c-k-c0x00ffffff-no-rj" alt="profile" />
                <div class="d-flex flex-column ms-2">
                    <div><b>jin.99</b></div>
                    <div style="color: lightgrey">janja kim</div>
                </div>
            </div>
            <div class="d-flex justify-content-between my-2">
                <div style="color: gray">Recommendations for you </div>
                <div><a href="#">See all</a></div>
            </div> 
            <div class="mt-3">
                <div class="d-flex align-items-center">
                    <img class="profile" src="https://upload.wikimedia.org/wikipedia/en/3/30/Miffy%2C_by_Dick_Bruna.jpg" alt="profile" />
                    <div class="d-flex flex-column m-2">
                        <div><b>w000uju</b></div>
                        <div style="color: lightgrey">Dongsaen</div>
                    </div>
                </div>
                <div class="d-flex align-items-center">
                    <img class="profile" src="https://upload.wikimedia.org/wikipedia/en/3/30/Miffy%2C_by_Dick_Bruna.jpg" alt="profile" />
                    <div class="d-flex flex-column m-2">
                        <div><b>w000uju</b></div>
                        <div style="color: lightgrey">Dongsaen</div>
                    </div>
                </div>
                <div class="d-flex align-items-center">
                    <img class="profile" src="https://upload.wikimedia.org/wikipedia/en/3/30/Miffy%2C_by_Dick_Bruna.jpg" alt="profile" />
                    <div class="d-flex flex-column m-2">
                        <div><b>w000uju</b></div>
                        <div style="color: lightgrey">Dongsaen</div>
                    </div>
                </div>
                <div class="d-flex align-items-center">
                    <img class="profile" src="https://upload.wikimedia.org/wikipedia/en/3/30/Miffy%2C_by_Dick_Bruna.jpg" alt="profile" />
                    <div class="d-flex flex-column m-2">
                        <div><b>w000uju</b></div>
                        <div style="color: lightgrey">Dongsaen</div>
                    </div>
                </div>
                <div class="d-flex align-items-center">
                    <img class="profile" src="https://upload.wikimedia.org/wikipedia/en/3/30/Miffy%2C_by_Dick_Bruna.jpg" alt="profile" />
                    <div class="d-flex flex-column m-2">
                        <div><b>w000uju</b></div>
                        <div style="color: lightgrey">Dongsaen</div>
                    </div>
                </div>
                <div class="d-flex align-items-center">
                    <img class="profile" src="https://upload.wikimedia.org/wikipedia/en/3/30/Miffy%2C_by_Dick_Bruna.jpg" alt="profile" />
                    <div class="d-flex flex-column m-2">
                        <div><b>w000uju</b></div>
                        <div style="color: lightgrey">Dongsaen</div>
                    </div>
                </div>
            </div>
        </div>
   </div>

    <div class="first-modal modal_overlay">
        <div class="modal_window">
            <div class="d-flex flex-row justify-content-between">
                <div> &nbsp; </div>
                <div class="text-center">Image Uploader</div>
                <div>
                    <span class="material-symbols-outlined">close</span>
                </div>
            </div>
            <div class="img_upload_space" style="border-top: solid 1px gray;width: 778px; height: 540px;margin-top: 10px">
            
        </div>
    </div>
    
    </div>
    
    <!-- second modal -->
    <div id="second_modal" class="modal_overlay">
        <div class="modal_window">
            <div style="display: flex; flex-direction: row; justify-content: space-between">
                <div style="width: 40px; background: gray">
    
                </div>
                <div>Image uploader</div>
                <div style="width: 40px; background: gray">
                    <span class="modal_close material-icons-outlined">close</span>
                </div>
            </div>

            <div style="border-top: solid 1px gray;display: flex; flex-direction: row;margin-top: 10px">
                <div class="img_upload_space" style="width: 500px; height: 540px;">
    
                </div>
                <div style="border-left: solid 1px gray">
                    <div>
                        <textarea id="input_feed_content" class="form-control" style="width: 276px; height: 400px"
                                  id="exampleFormControlTextarea1" rows="5"></textarea>
                    </div>
                    <button id="feed_create_button" type="button" class="btn btn-primary" style="width: 100%">
                        Share
                    </button>
                </div>
    
            </div>
    
        </div>
    </div>    
    
        
    
    <script>
        $('#nav_bar_add_box').click(() => {
            $('.modal_overlay').css({
                display: 'flex'
            })
            
            $(document.body).css({
                overflow: 'hidden'
            })
        })
        
        
        // drag & drop code
         $('.img_upload_space')
                .on("dragover", dragOver)
                .on("dragleave", dragOver)
                .on("drop", uploadFiles);
        
            function dragOver(e) {
                e.stopPropagation();
                e.preventDefault();
        
                if (e.type == "dragover") {
                    $(e.target).css({
                        "background-color": "black",
                        "outline-offset": "-20px"
                    });
                } else {
                    $(e.target).css({
                        "outline-offset": "-10px"
                    });
                }
            }
        
            function uploadFiles(e) {
                e.stopPropagation();
                e.preventDefault();
        
                e.dataTransfer = e.originalEvent.dataTransfer; //2
                files = e.target.files || e.dataTransfer.files;
                console.log("뭔가 파일을 올렸네??" + files[0].name);
                if (files.length > 1) {
                    alert('하나만 올려라.');
                    return;
                }
        
                if (files[0].type.match(/image.*/)) {
        
                    $('#first_modal').css({
                        display: 'none'
                    });
                    $('#second_modal').css({
                        display: 'flex'
                    });
        
                    $('.img_upload_space').css({
                        "background-image": "url(" + window.URL.createObjectURL(files[0]) + ")",
                        "outline": "none",
                        "background-size": "100%",
                        "background-repeat": "no-repeat",
                        "background-position": "center"
                    });
                } else {
                    alert('이미지가 아닙니다.');
                    return;
                }


        }
    </script>
</body>
</html>